version: '2'
services:
  mongo-node:
        image: mongo:latest
        container_name: "mongo-node"
        environment:
          - MONGO_DATA_DIR=/data/db
          - MONGO_LOG_DIR=/dev/null
        volumes:
          - ./data/db:/data/db
        ports:
            - 27017:27017
        command: mongod --smallfiles --logpath=/dev/null # --quiet          
  eureka-node:
      image: eureka-node
      build: ./eureka-node
      container_name: "eureka-node"
      links:
           - mongo-node
      ports:
        - "8761:8761"            
  core-node-service:
      image: core-node
      build: ./core-node
      container_name: "core-node"
      links:
           - mongo-node            
           - eureka-node
      ports:
        - "8585:8585"
  
